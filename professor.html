<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Societec - Home</title>
  <style>
    /* Estilos gerais da p√°gina */
    body {
      font-family: Arial, sans-serif;
      background: #f0f2f5;
      margin: 0;
      padding: 0;
    }

    /* Cabe√ßalho fixo no topo com logo e navega√ß√£o */
    header {
      background: #fff;
      padding: 15px 30px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
      position: sticky;
      top: 0;
      z-index: 100;
    }

    .logo {
      font-family: Verdana, sans-serif;
      font-weight: bold;
      font-size: 20px;
      color: #f9a825;
    }

    .nav-links {
      display: flex;
      gap: 20px;
      font-size: 14px;
    }

    .nav-links a {
      text-decoration: none;
      color: #333;
    }

    .header-icons {
      display: flex;
      gap: 15px;
      font-size: 18px;
      cursor: pointer;
      color: #555;
    }

    /* Container principal que centraliza tudo */
    .container {
      max-width: 600px;
      margin: 0 auto;
      padding: 20px;
    }

    /* Caixa de nova postagem e estilo dos posts */
    .new-post, .post {
      border: 2px dashed #f9a825;
      border-radius: 8px;
      padding: 15px;
      margin-bottom: 20px;
      position: relative;
      background: #fff;
    }

    /* Efeito de fita adesiva em cima das caixas */
    .new-post::before, .post::before {
      content: '';
      width: 50px;
      height: 15px;
      background: #ffeb3b;
      position: absolute;
      top: -10px;
      left: 20px;
      transform: rotate(-2deg);
    }

    textarea {
      width: 100%;
      border: none;
      background: transparent;
      resize: vertical;
      font-size: 14px;
    }

    /* Controles abaixo da caixa de texto */
    .controls {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-top: 10px;
      flex-wrap: wrap;
    }

    .icon-btn {
      background: none;
      border: none;
      font-size: 18px;
      cursor: pointer;
      margin-right: 10px;
    }

    /* Dropdown de salas */
    .rooms-dropdown {
      position: relative;
    }

    .rooms-btn {
      background: none;
      border: none;
      cursor: pointer;
      font-size: 16px;
    }

    .rooms-list {
      display: none;
      position: absolute;
      top: 25px;
      left: 0;
      background: #fff;
      border: 1px solid #ccc;
      border-radius: 4px;
      padding: 10px;
      z-index: 10;
      box-shadow: 0 2px 5px rgba(0,0,0,0.2);
      max-height: 200px;
      overflow-y: auto;
      width: 200px;
    }

    .rooms-list label {
      display: block;
      font-size: 13px;
    }

    /* Bot√£o de publicar */
    .publish-btn {
      background: #f9a825;
      color: #fff;
      border: none;
      padding: 8px 16px;
      border-radius: 4px;
      cursor: pointer;
    }

    /* Metadados e conte√∫do do post */
    .post .meta {
      font-size: 12px;
      color: #555;
      margin-bottom: 10px;
    }

    .post .content {
      font-size: 14px;
      margin-bottom: 10px;
    }

    .attachments img {
      max-width: 100%;
      border-radius: 4px;
      margin-top: 10px;
      max-height: 200px;
      object-fit: cover;
    }

    /* A√ß√µes do post */
    .actions {
      display: flex;
      gap: 15px;
      font-size: 14px;
      color: #555;
      cursor: pointer;
    }

    /* Respostas (coment√°rios) */
    .replies {
      margin-top: 10px;
      padding-left: 20px;
      border-left: 2px solid #eee;
    }

    .reply-box {
      margin-top: 10px;
      display: flex;
    }

    .reply-box input {
      flex: 1;
      padding: 6px;
      border: 1px solid #ccc;
      border-radius: 4px;
    }

    .reply-box button {
      margin-left: 5px;
      background: #f9a825;
      border: none;
      color: #fff;
      padding: 6px 10px;
      border-radius: 4px;
      cursor: pointer;
    }

    /* Preview da imagem anexada */
    #image-preview {
      max-width: 100%;
      max-height: 150px;
      margin-top: 10px;
      border-radius: 4px;
      object-fit: cover;
      display: none;
    }

    .locked {
      color: #f9a825;
      font-weight: bold;
    }

    /* Cores de fundo personaliz√°veis */
    .color-option {
      display: inline-block;
      width: 20px;
      height: 20px;
      margin-right: 5px;
      border-radius: 50%;
      cursor: pointer;
      border: 2px solid transparent;
    }

    .color-option.selected {
      border: 2px solid #333;
    }

    .color-yellow { background-color: #fff9c4; }
    .color-green { background-color: #c8e6c9; }
    .color-blue { background-color: #bbdefb; }
    .color-pink { background-color: #f8bbd0; }

  </style>
</head>
<body>

  <!-- Cabe√ßalho fixo com logo, navega√ß√£o e √≠cones -->
  <header>
    <div class="logo">Societec</div>
    <nav class="nav-links">
      <a href="#">Feed</a>
      <a href="#">Favoritos</a>
      <a href="#">Calend√°rio</a>
    </nav>
    <div class="header-icons">
      üîî <!-- Notifica√ß√£o -->
      üë§ <!-- Perfil -->
      ‚öôÔ∏è <!-- Configura√ß√µes -->
    </div>
  </header>

  <!-- Container principal -->
  <div class="container">

    <!-- Caixa de nova postagem -->
    <div class="new-post" id="new-post-box">
      <textarea id="post-text" rows="3" placeholder="O que voc√™ quer compartilhar?"></textarea>
      <img id="image-preview" />

      <!-- Controles da postagem -->
      <div class="controls">
        <div style="display:flex; align-items:center; flex-wrap: wrap; gap: 5px;">
          <button class="icon-btn" id="icon-attach">üìé</button>
          <input type="file" id="post-image" accept="image/*" style="display:none;">

          <!-- Dropdown de sele√ß√£o de salas -->
          <div class="rooms-dropdown">
            <button class="rooms-btn" id="rooms-toggle" title="">üìÇ <span id="rooms-label">Salas</span></button>
            <div class="rooms-list" id="rooms-list">
              <strong>ADM</strong>
              <label><input type="checkbox" value="ADM 1¬∫ Ano"> 1¬∫ Ano</label>
              <label><input type="checkbox" value="ADM 2¬∫ Ano"> 2¬∫ Ano</label>
              <label><input type="checkbox" value="ADM 3¬∫ Ano"> 3¬∫ Ano</label>
              <strong>DS</strong>
              <label><input type="checkbox" value="DS 1¬∫ Ano"> 1¬∫ Ano</label>
              <label><input type="checkbox" value="DS 2¬∫ Ano"> 2¬∫ Ano</label>
              <label><input type="checkbox" value="DS 3¬∫ Ano"> 3¬∫ Ano</label>
              <strong>ELET</strong>
              <label><input type="checkbox" value="ELET 1¬∫ Ano"> 1¬∫ Ano</label>
              <label><input type="checkbox" value="ELET 2¬∫ Ano"> 2¬∫ Ano</label>
              <label><input type="checkbox" value="ELET 3¬∫ Ano"> 3¬∫ Ano</label>
              <strong>MKT</strong>
              <label><input type="checkbox" value="MKT 1¬∫ Ano"> 1¬∫ Ano</label>
              <label><input type="checkbox" value="MKT 2¬∫ Ano"> 2¬∫ Ano</label>
              <label><input type="checkbox" value="MKT 3¬∫ Ano"> 3¬∫ Ano</label>
              <strong>GERAL</strong>
              <label><input type="checkbox" value="Geral" id="geral-box"> Geral</label>
            </div>
          </div>

          <!-- √çcone para restringir aos logados -->
          <button class="icon-btn" id="icon-logged">üîì</button>

          <!-- Paleta de cores -->
          <div id="color-selector">
            <span class="color-option color-yellow selected" data-color="#fff9c4"></span>
            <span class="color-option color-green" data-color="#c8e6c9"></span>
            <span class="color-option color-blue" data-color="#bbdefb"></span>
            <span class="color-option color-pink" data-color="#f8bbd0"></span>
          </div>
        </div>

        <!-- Bot√£o para postar -->
        <button class="publish-btn" id="btn-post">Publicar</button>
      </div>
    </div>

    <!-- Onde os posts v√£o aparecer -->
    <div id="feed"></div>
  </div>

  <!-- Scripts abaixo mant√™m a interatividade -->
  <script>
    // Preview de imagem ao escolher arquivo
    const preview = document.getElementById('image-preview');
    const fileInput = document.getElementById('post-image');

    fileInput.addEventListener('change', () => {
      if (fileInput.files[0]) {
        preview.src = URL.createObjectURL(fileInput.files[0]);
        preview.style.display = 'block';
      } else {
        preview.style.display = 'none';
      }
    });

    // Clique no clipe ativa o input de arquivo
    document.getElementById('icon-attach').addEventListener('click', () => fileInput.click());

    // Atualiza o r√≥tulo das salas com os selecionados
    const roomsLabel = document.getElementById('rooms-label');
    const updateRoomsLabel = () => {
      const checked = Array.from(document.querySelectorAll('#rooms-list input:checked')).map(i => i.value);
      roomsLabel.textContent = checked.length === 0 ? 'Salas' : (checked.join(', ').slice(0, 30) + (checked.join(', ').length > 30 ? '...' : ''));
      document.getElementById('rooms-toggle').title = checked.join(', ');
    }

    document.querySelectorAll('#rooms-list input').forEach(cb => cb.addEventListener('change', updateRoomsLabel));

    // Toggle visibilidade da lista de salas
    document.getElementById('rooms-toggle').addEventListener('click', () => {
      const list = document.getElementById('rooms-list');
      list.style.display = list.style.display === 'block' ? 'none' : 'block';
    });

    // Checkbox "Geral" marca ou desmarca todos
    const geralBox = document.getElementById('geral-box');
    geralBox.addEventListener('change', () => {
      const allCheckboxes = document.querySelectorAll('#rooms-list input');
      allCheckboxes.forEach(cb => { if (cb !== geralBox) cb.checked = geralBox.checked; });
      updateRoomsLabel();
    });

    // Bot√£o para restringir visibilidade
    let lockedOnly = false;
    const lockBtn = document.getElementById('icon-logged');
    lockBtn.addEventListener('click', () => {
      lockedOnly = !lockedOnly;
      lockBtn.textContent = lockedOnly ? 'üîí' : 'üîì';
      lockBtn.classList.toggle('locked', lockedOnly);
    });

    // Seletor de cor de fundo
    let selectedColor = '#fff9c4';
    document.querySelectorAll('.color-option').forEach(opt => {
      opt.addEventListener('click', function () {
        document.querySelectorAll('.color-option').forEach(o => o.classList.remove('selected'));
        this.classList.add('selected');
        selectedColor = this.dataset.color;
        document.getElementById('new-post-box').style.backgroundColor = selectedColor;
      });
    });

    // Fun√ß√£o para criar e exibir um novo post
    const feed = document.getElementById('feed');
    document.getElementById('btn-post').addEventListener('click', () => {
      const text = document.getElementById('post-text').value.trim();
      if (!text) return;
      const file = fileInput.files[0];
      const rooms = Array.from(document.querySelectorAll('#rooms-list input:checked')).map(i => i.value).join(', ');
      const post = createPost(text, file, rooms, lockedOnly);
      feed.prepend(post);

      // Reset dos campos
      document.getElementById('post-text').value = '';
      fileInput.value = '';
      preview.style.display = 'none';
      document.querySelectorAll('#rooms-list input').forEach(i => i.checked = i === geralBox);
      updateRoomsLabel();
      lockedOnly = false;
      lockBtn.textContent = 'üîì';
      lockBtn.classList.remove('locked');
      document.getElementById('new-post-box').style.backgroundColor = '#fff';
      document.querySelectorAll('.color-option').forEach(o => o.classList.remove('selected'));
      document.querySelector('[data-color="#fff9c4"]').classList.add('selected');
      selectedColor = '#fff9c4';
    });

    // Fun√ß√£o auxiliar para criar um post
    function createPost(text, file, rooms, locked) {
      const postEl = document.createElement('div');
      postEl.className = 'post';
      postEl.style.backgroundColor = selectedColor;
      const now = new Date();
      const timestamp = now.toLocaleTimeString('pt-BR', { hour: '2-digit', minute: '2-digit' });

      const meta = document.createElement('div');
      meta.className = 'meta';
      const nome = localStorage.getItem("userName") || "Voc√™";
      meta.textContent = `${nome} ‚Ä¢ ${rooms}${locked ? ' ‚Ä¢ Apenas logados' : ''} ‚Ä¢ ${timestamp}`;


      const content = document.createElement('div');
      content.className = 'content';
      content.textContent = text;

      postEl.append(meta, content);

      if (file) {
        const img = document.createElement('img');
        img.src = URL.createObjectURL(file);
        const att = document.createElement('div');
        att.className = 'attachments';
        att.append(img);
        postEl.append(att);
      }

      const actions = document.createElement('div');
      actions.className = 'actions';

      const like = document.createElement('span');
      like.className = 'like';
      like.innerHTML = '‚ù§Ô∏è <span class="count">0</span>';

      const reply = document.createElement('span');
      reply.className = 'reply';
      reply.textContent = 'üí¨ ';

      actions.append(like, reply);
      postEl.append(actions);

      const replies = document.createElement('div');
      replies.className = 'replies';
      postEl.append(replies);

      // Responder a um post
      reply.addEventListener('click', () => {
        if (postEl.querySelector('.reply-box')) return;
        const box = document.createElement('div');
        box.className = 'reply-box';
        box.innerHTML = '<input placeholder="Escreva uma resposta..."><button>Enviar</button>';
        replies.append(box);

        box.querySelector('button').addEventListener('click', () => {
          const val = box.querySelector('input').value.trim();
          if (!val) return;

          const rep = document.createElement('div');
          rep.className = 'post';
          rep.style.marginTop = '5px';
          rep.style.backgroundColor = selectedColor;

          const metaRep = document.createElement('div');
          metaRep.className = 'meta';
          const nome = localStorage.getItem("userName") || "Voc√™";
          metaRep.textContent = `${nome} ‚Ä¢ ${new Date().toLocaleTimeString('pt-BR', {hour:'2-digit',minute:'2-digit'})}`;

          const contentRep = document.createElement('div');
          contentRep.className = 'content';
          contentRep.textContent = val;

          rep.append(metaRep, contentRep);
          replies.append(rep);
          box.remove();
        });
      });

      // Curtir/descurtir post
      like.addEventListener('click', () => {
        const countSpan = like.querySelector('.count');
        let liked = like.classList.toggle('liked');
        countSpan.textContent = liked ? parseInt(countSpan.textContent) + 1 : parseInt(countSpan.textContent) - 1;
        like.innerHTML = `${liked ? '‚ù§Ô∏è' : 'ü§ç'} <span class="count">${countSpan.textContent}</span>`;
      });

      return postEl;
    }

    // Atualiza√ß√£o din√¢mica dos checkboxes e sincroniza√ß√£o com "Geral"
    document.addEventListener('DOMContentLoaded', function () {
      const geralCheckbox = document.getElementById('geral-box');
      const checkboxes = document.querySelectorAll('#rooms-list input:not(#geral-box)');

      geralCheckbox.addEventListener('change', () => {
        checkboxes.forEach(checkbox => {
          checkbox.checked = geralCheckbox.checked;
        });
        updateRoomsLabel();
      });

      checkboxes.forEach(checkbox => {
        checkbox.addEventListener('change', () => {
          if ([...checkboxes].every(cb => cb.checked)) {
            geralCheckbox.checked = true;
          } else {
            geralCheckbox.checked = false;
          }
          updateRoomsLabel();
        });
      });
    });
  </script>
</body>
</html>
